---
alwaysApply: true
description: 環境変数・秘匿情報の取り扱い（漏えい防止）
---
# 環境変数・秘匿情報 ルール

参照: [仕様書.md](mdc:仕様書.md)「4. Next.js側 環境変数」「6. セキュリティまとめ」

## 厳守事項
- `GAS_API_KEY` をクライアントへ渡さない。ビルド時/実行時に公開される `NEXT_PUBLIC_*` 命名を使わない。
- `.env*` はバージョン管理しない。サンプルは `.env.example` のみ。
- ログ/エラーメッセージ/スクリーンショットに鍵・URL・IDを出さない。

## 必須変数
- GAS: `GAS_API_BASE`, `GAS_API_KEY`
- Auth: `GOOGLE_CLIENT_ID`, `GOOGLE_CLIENT_SECRET`, `NEXTAUTH_SECRET`
- UI: `ALLOWED_EMAILS`
- Revalidate: `REVALIDATE_SECRET`

## 検出とレビュールール
- PRレビューで `process.env` の扱いを必ず確認。クライアントへ伝播しないこと。
- 文字列結合/テンプレートで URL を構築する箇所に鍵を混ぜない。

このルールはプロジェクト横断で適用されます。

